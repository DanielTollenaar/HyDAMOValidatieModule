{
	"$schema": "http://json-schema.org/schema#",
	"type": "object",
	"properties": {
		"status_object": {
			"type": "array",
			"items": {
				"type": "string",
				"enum": [
					"planvorming",
					"realisatie",
					"gerealiseerd",
					"buiten bedrijf",
					"niet meer aanwezig",
					"te verwijderen",
					"onbekend"
				]
			}
		},
		"objects": {
			"type": "array",
			"items": {
				"$ref": "#/$defs/object_rules_set"
			}
		}
	},
	"$defs": {
		"object_rules_set": {
			"type": "object",
			"required": [
				"object",
				"validation_rules"
			],
			"properties": {
				"object": {
					"$ref": "#/$defs/hydamo_objects"
				},
				"general_rules": {
					"type": "array",
					"items": {
						"$ref": "#/$defs/general_rule"
					}
				},
				"validation_rules": {
					"minItems": 1,
					"type": "array",
					"items": {
						"$ref": "#/$defs/validation_rule"
					}
				}
			}
		},
		"general_rule": {
			"type": "object",
			"required": [
				"id",
				"order",
				"result_variable",
				"function"
			],
			"properties": {
				"id": {
					"minItems": 1,
					"maxItems": 1,
					"type": "integer"
				},
				"order": {
					"minItems": 1,
					"maxItems": 1,
					"type": "integer"
				},
				"result_variable": {
					"minItems": 1,
					"maxItems": 1,
					"type": "string"
				},
				"function": {
					"minItems": 1,
					"maxItems": 1,
					"type": "object",
					"oneOf": [
						{
							"$ref": "#/$defs/sum"
						},
						{
							"$ref": "#/$defs/buffer"
						},
						{
							"$ref": "#/$defs/object_relation"
						}
					]
				}
			}
		},
		"validation_rule": {
			"type": "object",
			"required": [
				"id",
				"name",
				"type",
				"error_type",
				"result_variable",
				"error_message",
				"active",
				"function"
			],
			"properties": {
				"id": {
					"minItems": 1,
					"maxItems": 1,
					"type": "integer"
				},
				"name": {
					"minItems": 1,
					"maxItems": 1,
					"type": "string"
				},
				"type": {
					"minItems": 1,
					"maxItems": 1,
					"type": "string",
					"enum": [
						"logic",
						"topologic"
					]
				},
				"exceptions": {
					"maxItems": 1,
					"type": "array",
					"items": {
						"type": "string"
					},
					"uniqueItems": true
				},
				"filter": {
					"maxItems": 1,
					"type": "object",
					"oneOf": [
						{
							"$ref": "#/$defs/LE"
						},
						{
							"$ref": "#/$defs/LT"
						},
						{
							"$ref": "#/$defs/GE"
						},
						{
							"$ref": "#/$defs/GT"
						},
						{
							"$ref": "#/$defs/EQ"
						},
						{
							"$ref": "#/$defs/ISIN"
						},
						{
							"$ref": "#/$defs/NOTIN"
						}
					]
				},
				"error_type": {
					"minItems": 1,
					"maxItems": 1,
					"type": "string",
					"enum": [
						"critical",
						"non-critical"
					]
				},
				"penalty": {
					"maxItems": 1,
					"type": "integer",
					"minimum": 0,
					"maximum": 9
				},
				"result_variable": {
					"minItems": 1,
					"maxItems": 1,
					"type": "string"
				},
				"error_message": {
					"minItems": 1,
					"maxItems": 1,
					"type": "string"
				},
				"active": {
					"minItems": 1,
					"maxItems": 1,
					"type": "boolean"
				},
				"function": {
					"minItems": 1,
					"maxItems": 1,
					"type": "object",
					"oneOf": [
						{
							"$ref": "#/$defs/LE"
						},
						{
							"$ref": "#/$defs/LT"
						},
						{
							"$ref": "#/$defs/GE"
						},
						{
							"$ref": "#/$defs/GT"
						},
						{
							"$ref": "#/$defs/EQ"
						},
						{
							"$ref": "#/$defs/BE"
						},
						{
							"$ref": "#/$defs/ISIN"
						},
						{
							"$ref": "#/$defs/NOTIN"
						},
						{
							"$ref": "#/$defs/snaps_to_hydroobject"
						}
					]
				},
				"tags": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"uniqueItems": true
				}
			}
		},
		"LE": {
			"type": "object",
			"required": [
				"LE"
			],
			"properties": {
				"LE": {
					"type": "object",
					"required": [
						"left",
						"right"
					],
					"properties": {
						"left": {
							"type": [
								"string",
								"number"
							]
						},
						"right": {
							"type": [
								"string",
								"number"
							]
						}
					}
				}
			}
		},
		"LT": {
			"type": "object",
			"required": [
				"LT"
			],
			"properties": {
				"LT": {
					"type": "object",
					"required": [
						"left",
						"right"
					],
					"properties": {
						"left": {
							"type": [
								"string",
								"number"
							]
						},
						"right": {
							"type": [
								"string",
								"number"
							]
						}
					}
				}
			}
		},
		"GE": {
			"type": "object",
			"required": [
				"GE"
			],
			"properties": {
				"GE": {
					"type": "object",
					"required": [
						"left",
						"right"
					],
					"properties": {
						"left": {
							"type": [
								"string",
								"number"
							]
						},
						"right": {
							"type": [
								"string",
								"number"
							]
						}
					}
				}
			}
		},
		"GT": {
			"type": "object",
			"required": [
				"GT"
			],
			"properties": {
				"GT": {
					"type": "object",
					"required": [
						"left",
						"right"
					],
					"properties": {
						"left": {
							"type": [
								"string",
								"number"
							]
						},
						"right": {
							"type": [
								"string",
								"number"
							]
						}
					}
				}
			}
		},
		"EQ": {
			"type": "object",
			"required": [
				"EQ"
			],
			"properties": {
				"EQ": {
					"type": "object",
					"required": [
						"left",
						"right"
					],
					"properties": {
						"left": {
							"type": [
								"string",
								"number"
							]
						},
						"right": {
							"type": [
								"string",
								"number"
							]
						}
					}
				}
			}
		},
		"BE": {
			"type": "object",
			"required": [
				"BE"
			],
			"properties": {
				"BE": {
					"type": "object",
					"required": [
						"parameter",
						"min",
						"max"
					],
					"properties": {
						"parameter": {
							"type": "string"
						},
						"min": {
							"type": "number"
						},
						"max": {
							"type": "number"
						},
						"inclusive": {
							"type": "boolean"
						}
					}
				}
			}
		},
		"ISIN": {
			"type": "object",
			"required": [
				"ISIN"
			],
			"properties": {
				"ISIN": {
					"type": "object",
					"required": [
						"parameter",
						"array"
					],
					"properties": {
						"parameter": {
							"type": "string"
						},
						"array": {
							"type": "array",
							"items": {
								"type": "string"
							}
						}
					}
				}
			}
		},
		"NOTIN": {
			"type": "object",
			"required": [
				"NOTIN"
			],
			"properties": {
				"NOTIN": {
					"type": "object",
					"required": [
						"parameter",
						"array"
					],
					"properties": {
						"parameter": {
							"type": "string"
						},
						"array": {
							"type": "array",
							"items": {
								"type": "string"
							}
						}
					}
				}
			}
		},
		"snaps_to_hydroobject": {
			"type": "object",
			"required": [
				"snaps_to_hydroobject"
			],
			"properties": {
				"snaps_to_hydroobject": {
					"type": "object",
					"required": [
						"method"
					],
					"properties": {
						"distance": {
							"type": "number"
						},
						"method": {
							"type": "string",
							"enum": [
								"overall",
								"intersecting",
								"centroid",
								"ends"
							]
						}
					}
				}
			}
		},
		"sum": {
			"type": "object",
			"required": [
				"sum"
			],
			"properties": {
				"sum": {
					"type": "object",
					"required": [
						"array"
					],
					"properties": {
						"array": {
							"type": "array",
							"items": {
								"type": [
									"number",
									"string"
								]
							}
						}
					}
				}
			}
		},
		"buffer": {
			"type": "object",
			"required": [
				"buffer"
			],
			"properties": {
				"buffer": {
					"type": "object",
					"required": [
						"radius",
						"percentile",
						"coverage"
					],
					"properties": {
						"radius": {
							"type": [
								"string",
								"number"
							]
						},
						"percentile": {
							"type": "integer"
						},
						"coverage": {
							"type": "string",
							"enum": [
								"AHN"
							]
						},
						"fill_value": {
							"type": "number"
						}
					}
				}
			}
		},
		"object_relation": {
			"type": "object",
			"required": [
				"object_relation"
			],
			"properties": {
				"object_relation": {
					"type": "object",
					"required": [
						"related_object",
						"statistic"
					],
					"properties": {
						"related_object": {
							"$ref": "#/$defs/hydamo_objects"
						},
						"related_parameter": {
							"type": "string"
						},
						"statistic": {
							"type": "string",
							"enum": [
								"min",
								"max",
								"sum",
								"count"
							]
						},
						"fill_value": {
							"type": "number"
						}
					}
				}
			}
		},
		"hydamo_objects": {
			"type": "string",
			"enum": [
				"admingrenswaterschap",
				"afsluitmiddel",
				"afvoergebiedaanvoergebied",
				"aquaduct",
				"beheergrenswaterschap",
				"bijzonderhydraulischobject",
				"bodemval",
				"brug",
				"doorstroomopening",
				"duikersifonhevel",
				"gemaal",
				"grondwaterinfolijn",
				"grondwaterinfopunt",
				"grondwaterkoppellijn",
				"grondwaterkoppelpunt",
				"hydroobject",
				"hydroobject_normgp",
				"kunstwerkopening",
				"lateraleknoop",
				"normgeparamprofiel",
				"normgeparamprofielwaarde",
				"peilafwijkinggebied",
				"peilbesluitgebied",
				"peilgebiedpraktijk",
				"peilgebiedvigerend",
				"pomp",
				"regelmiddel",
				"reglementgrenswaterschap",
				"streefpeil",
				"stuw",
				"vispassage",
				"vispassagevlak",
				"zandvang"
			]
		}
	}
}